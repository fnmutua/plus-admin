ALTER SEQUENCE seq RESTART WITH 1;
UPDATE t SET idcolumn=nextval('seq');

 ALTER SEQUENCE settlement_id_seq RESTART WITH 75 ;
 ALTER SEQUENCE households_id_seq RESTART WITH 445 ;
 
  ALTER SEQUENCE beneficiary_id_seq RESTART WITH 483 ;

 
ALTER TABLE settlement ADD COLUMN geom geometry(MultiPolygon,4326);


ALTER SEQUENCE indicator_category_id_seq  RESTART WITH 35 ;


ALTER SEQUENCE beneficiary_id_seq1  RESTART WITH 1013 ;

ALTER SEQUENCE beneficiary_id_seq  RESTART WITH 1013 ;


ALTER SEQUENCE users_id_seq  RESTART WITH 33 ;

ALTER SEQUENCE indicator_category_id_seq  RESTART WITH 47 ;


#Backup Railway DB
pg_restore -U postgres -h containers-us-west-104.railway.app -p 7760   -p 6473 -W -F t -d railway  08012023.kisip.sql.tar


# Restore DB to Raiway
pg_restore -U postgres -h containers-us-west-138.railway.app -p 6542 -W -F t -d railway 26012023.kisip.sql.tar


containers-us-west-138.railway.app

 lfqb3md5ixbmn3tam15D

postgresql://postgres:lfqb3md5ixbmn3tam15D@containers-us-west-138.railway.app:6542/railway

postgresql://postgres:AGfEf1bBe52EDeFaBBCBf343gA5ga11e@roundhouse.proxy.rlwy.net:19915/railway

DELETE FROM indicator_category_report

DROP TABLE indicator_category_report


CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updatedAt = NOW();
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER update_timestamp
BEFORE UPDATE ON logs
FOR EACH ROW
EXECUTE FUNCTION updatedAt();




DELETE FROM grievances;
ALTER SEQUENCE resolution_level_id_seq RESTART WITH 4;




UPDATE public.project SET  implementation_scope = 'Settlement'; 


ALTER TABLE project ADD COLUMN implementation_scope VARCHAR(100);



// Delete indexes
DROP INDEX IF EXISTS unique_indicator_project_category;



// remvoe duplciates  
WITH CTE AS (
    SELECT
        id, -- Assuming `id` is your primary key or unique identifier
        ROW_NUMBER() OVER (
            PARTITION BY programme_implementation_id, indicator_category_id, settlement_id, amount 
            ORDER BY id
        ) AS rn
    FROM
        indicator_category_report
)
DELETE FROM indicator_category_report
WHERE id IN (
    SELECT id
    FROM CTE
    WHERE rn > 1
);



https://learn.microsoft.com/en-us/windows/wsl/install


sudo service redis-server start
redis-cli




DROP TABLE grievance_document CASCADE;
